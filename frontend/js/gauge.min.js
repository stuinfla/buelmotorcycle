/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2016 Mykhailo Stadnyk <mikhus@gmail.com>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 * @version 2.1.7
 */
!function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function l(e){return e.toPrecision?parseFloat(e.toPrecision(15)):e}function s(e,t,i,r,o,n,a){if(0===n)return i;var l=a-r,s=(l-o)/(n-t),c=o-s*t,d=i;return d>o&&(d=o+s*(d-o)/(l-o)*(n-o)),r+s*(d-c)/s}function h(e,t){var i=t.beginPath(),r=t.lineWidth,o=t.startAngle,n=t.endAngle,a=t.radius,l=t.borderWidth,s=t.barBeginCircle,h=t.barWidth,c=t.barProgress,d=t.barLength,u=t.barColor,f=t.barStroke,m=t.colorBar,v=t.colorBarProgress,g=t.colorBarStroke,b=t.colorNeedle,p=t.colorStartStripe,w=t.colorEndStripe,k=t.colorMajorTicks,y=t.colorMinorTicks,x=t.colorNumbers,C=t.colorPlate,S=t.colorPlateEnd,T=t.colorTitle,M=t.colorUnits,P=t.colorValue,B=t.colorValueText,A=t.colorValueTextShadow,V=t.colorBorderOuter,O=t.colorBorderOuterEnd,I=t.colorBorderMiddle,E=t.colorBorderMiddleEnd,L=t.colorBorderInner,W=t.colorBorderInnerEnd,D=t.colorNeedleShadowUp,F=t.colorNeedleShadowDown,N=t.colorNeedleCircleOuter,R=t.colorNeedleCircleOuterEnd,q=t.colorNeedleCircleInner,j=t.colorNeedleCircleInnerEnd,z=t.colorNeedleEnd,H=t.colorNeedleStart,G=t.colorValueBox,U=t.colorValueBoxShadow,K=t.colorValueBoxBackground,Y=t.colorValueBoxBorder,X=t.colorHighlights,Q=t.colorMinorTicks,J=t.colorMajorTicks,Z=t.colorNumbers,et=t.colorTitle,tt=t.colorUnits,it=t.colorValue,rt=t.fontTitle,ot=t.fontUnits,nt=t.fontValue,at=t.fontNumbers,lt=t.fontTitleSize,st=t.fontUnitsSize,ht=t.fontValueSize,ct=t.fontNumbersSize,dt=t.fontTitleWeight,ut=t.fontUnitsWeight,ft=t.fontValueWeight,mt=t.fontNumbersWeight,vt=t.fontTitleStyle,gt=t.fontUnitsStyle,bt=t.fontValueStyle,pt=t.fontNumbersStyle,wt=t.highlights,kt=t.highlightsWidth,yt=t.highlightsLineCap,xt=t.valueText,Ct=t.valueTextShadow,St=t.valueDec,Tt=t.valueInt,Mt=t.valueBox,Pt=t.valueBoxWidth,Bt=t.valueBoxStroke,At=t.valueBoxBorderRadius,Vt=t.valueBoxHeight,Ot=t.value,It=t.minValue,Et=t.maxValue,Lt=t.minAngle,Wt=t.maxAngle,Dt=t.majorTicks,Ft=t.minorTicks,Nt=t.strokeTicks,Rt=t.exactTicks,qt=t.animatedValue,jt=t.animateOnInit,zt=t.animation,Ht=t.animationDuration,Gt=t.animationRule,Ut=t.animationTarget,Kt=t.useMinPath,Yt=t.ticksAngle,Xt=t.needle,Qt=t.needleType,Jt=t.needleWidth,Zt=t.needleCircleSize,ei=t.needleCircleOuter,ti=t.needleCircleInner,ii=t.needleStart,ri=t.needleEnd,oi=t.needleShadow,ni=t.borderShadowWidth,ai=t.borderOuterWidth,li=t.borderMiddleWidth,si=t.borderInnerWidth,hi=t.borders,ci=t.title,di=t.units,ui=t.valueBoxShadow,fi=t.valueBoxAlign,mi=t.valueBoxVAlign,vi=t.tickSide,gi=t.needleSide,bi=t.numberSide,pi=t.ticksWidth,wi=t.ticksWidthMinor,ki=t.ticksPadding,yi=t.barWidth,xi=t.barStrokeWidth,Ci=t.barProgress,Si=t.highlights,Ti=t.value,Mi=t.minValue,Pi=t.maxValue,Bi=t.majorTicks,Ai=t.minorTicks,Vi=t.strokeTicks,Oi=t.animatedValue,Ii=t.animateOnInit,Ei=t.animation,Li=t.animationDuration,Wi=t.animationRule,Di=t.animationTarget,Fi=t.useMinPath,Ni=t.title,Ri=t.units,qi=t.fontTitle,ji=t.fontUnits,zi=t.fontValue,Hi=t.fontNumbers,Gi=t.fontTitleSize,Ui=t.fontUnitsSize,Ki=t.fontValueSize,Yi=t.fontNumbersSize,Xi=t.fontTitleWeight,Qi=t.fontUnitsWeight,Ji=t.fontValueWeight,Zi=t.fontNumbersWeight,er=t.fontTitleStyle,tr=t.fontUnitsStyle,ir=t.fontValueStyle,rr=t.fontNumbersStyle,or=t.valueText,nr=t.valueTextShadow,ar=t.valueDec,lr=t.valueInt,sr=t.valueBox,hr=t.valueBoxStroke,cr=t.valueBoxBorderRadius,dr=t.valueBoxShadow,ur=t.needle,fr=t.needleShadow,mr=t.borderShadowWidth,vr=t.borders,gr=t.highlights,br=t.value,pr=t.minValue,wr=t.maxValue,kr=t.majorTicks,yr=t.minorTicks,xr=t.strokeTicks,Cr=t.animatedValue,Sr=t.animateOnInit,Tr=t.animation,Mr=t.animationDuration,Pr=t.animationRule,Br=t.animationTarget,Ar=t.useMinPath,Vr=t.title,Or=t.units,Ir=t.fontTitle,Er=t.fontUnits,Lr=t.fontValue,Wr=t.fontNumbers,Dr=t.fontTitleSize,Fr=t.fontUnitsSize,Nr=t.fontValueSize,Rr=t.fontNumbersSize,qr=t.fontTitleWeight,jr=t.fontUnitsWeight,zr=t.fontValueWeight,Hr=t.fontNumbersWeight,Gr=t.fontTitleStyle,Ur=t.fontUnitsStyle,Kr=t.fontValueStyle,Yr=t.fontNumbersStyle,Xr=t.valueText,Qr=t.valueTextShadow,Jr=t.valueDec,Zr=t.valueInt,eo=t.valueBox,to=t.valueBoxStroke,io=t.valueBoxBorderRadius,ro=t.valueBoxShadow,oo=t.needle,no=t.needleShadow,ao=t.borderShadowWidth,lo=t.borders,so=t.highlights,ho=t.value,co=t.minValue,uo=t.maxValue,fo=t.majorTicks,mo=t.minorTicks,vo=t.strokeTicks,go=t.animatedValue,bo=t.animateOnInit,po=t.animation,wo=t.animationDuration,ko=t.animationRule,yo=t.animationTarget,xo=t.useMinPath,Co=t.title,So=t.units,To=t.fontTitle,Mo=t.fontUnits,Po=t.fontValue,Bo=t.fontNumbers,Ao=t.fontTitleSize,Vo=t.fontUnitsSize,Io=t.fontValueSize,Eo=t.fontNumbersSize,Lo=t.fontTitleWeight,Wo=t.fontUnitsWeight,Do=t.fontValueWeight,Fo=t.fontNumbersWeight,No=t.fontTitleStyle,Ro=t.fontUnitsStyle,qo=t.fontValueStyle,jo=t.fontNumbersStyle,zo=t.valueText,Ho=t.valueTextShadow,Go=t.valueDec,Uo=t.valueInt,Ko=t.valueBox,Yo=t.valueBoxStroke,Xo=t.valueBoxBorderRadius,Qo=t.valueBoxShadow,Jo=t.needle,Zo=t.needleShadow,en=t.borderShadowWidth,tn=t.borders,rn=t.highlights,on=t.value,nn=t.minValue,an=t.maxValue,ln=t.majorTicks,sn=t.minorTicks,hn=t.strokeTicks,cn=t.animatedValue,dn=t.animateOnInit,un=t.animation,fn=t.animationDuration,mn=t.animationRule,vn=t.animationTarget,gn=t.useMinPath,bn=t.title,pn=t.units,wn=t.fontTitle,kn=t.fontUnits,yn=t.fontValue,xn=t.fontNumbers,Cn=t.fontTitleSize,Sn=t.fontUnitsSize,Tn=t.fontValueSize,Mn=t.fontNumbersSize,Pn=t.fontTitleWeight,Bn=t.fontUnitsWeight,An=t.fontValueWeight,Vn=t.fontNumbersWeight,On=t.fontTitleStyle,In=t.fontUnitsStyle,En=t.fontValueStyle,Ln=t.fontNumbersStyle,Wn=t.valueText,Dn=t.valueTextShadow,Fn=t.valueDec,Nn=t.valueInt,Rn=t.valueBox,qn=t.valueBoxStroke,jn=t.valueBoxBorderRadius,zn=t.valueBoxShadow,Hn=t.needle,Gn=t.needleShadow,Un=t.borderShadowWidth,Kn=t.borders,Yn=t.highlights,Xn=t.value,Qn=t.minValue,Jn=t.maxValue,Zn=t.majorTicks,ea=t.minorTicks,ta=t.strokeTicks,ia=t.animatedValue,ra=t.animateOnInit,oa=t.animation,na=t.animationDuration,aa=t.animationRule,la=t.animationTarget,sa=t.useMinPath,ha=t.title,ca=t.units,da=t.fontTitle,ua=t.fontUnits,fa=t.fontValue,ma=t.fontNumbers,va=t.fontTitleSize,ga=t.fontUnitsSize,ba=t.fontValueSize,pa=t.fontNumbersSize,wa=t.fontTitleWeight,ka=t.fontUnitsWeight,ya=t.fontValueWeight,xa=t.fontNumbersWeight,Ca=t.fontTitleStyle,Sa=t.fontUnitsStyle,Ta=t.fontValueStyle,Ma=t.fontNumbersStyle,Pa=t.valueText,Ba=t.valueTextShadow,Aa=t.valueDec,Va=t.valueInt,Oa=t.valueBox,Ia=t.valueBoxStroke,Ea=t.valueBoxBorderRadius,La=t.valueBoxShadow,Wa=t.needle,Da=t.needleShadow,Fa=t.borderShadowWidth,Na=t.borders,Ra=t.highlights,qa=t.value,ja=t.minValue,za=t.maxValue,Ha=t.majorTicks,Ga=t.minorTicks,Ua=t.strokeTicks,Ka=t.animatedValue,Ya=t.animateOnInit,Xa=t.animation,Qa=t.animationDuration,Ja=t.animationRule,Za=t.animationTarget,el=t.useMinPath,tl=t.title,il=t.units,rl=t.fontTitle,ol=t.fontUnits,nl=t.fontValue,al=t.fontNumbers,ll=t.fontTitleSize,sl=t.fontUnitsSize,hl=t.fontValueSize,cl=t.fontNumbersSize,dl=t.fontTitleWeight,ul=t.fontUnitsWeight,fl=t.fontValueWeight,ml=t.fontNumbersWeight,vl=t.fontTitleStyle,gl=t.fontUnitsStyle,bl=t.fontValueStyle,pl=t.fontNumbersStyle,wl=t.valueText,kl=t.valueTextShadow,yl=t.valueDec,xl=t.valueInt,Cl=t.valueBox,Sl=t.valueBoxStroke,Tl=t.valueBoxBorderRadius,Ml=t.valueBoxShadow,Pl=t.needle,Bl=t.needleShadow,Al=t.borderShadowWidth,Vl=t.borders,Ol=t.highlights,Il=t.value,El=t.minValue,Ll=t.maxValue,Wl=t.majorTicks,Dl=t.minorTicks,Fl=t.strokeTicks,Nl=t.animatedValue,Rl=t.animateOnInit,ql=t.animation,jl=t.animationDuration,zl=t.animationRule,Hl=t.animationTarget,Gl=t.useMinPath,Ul=t.title,Kl=t.units,Yl=t.fontTitle,Xl=t.fontUnits,Ql=t.fontValue,Jl=t.fontNumbers,Zl=t.fontTitleSize,es=t.fontUnitsSize,ts=t.fontValueSize,is=t.fontNumbersSize,rs=t.fontTitleWeight,os=t.fontUnitsWeight,ns=t.fontValueWeight,as=t.fontNumbersWeight,ls=t.fontTitleStyle,ss=t.fontUnitsStyle,hs=t.fontValueStyle,cs=t.fontNumbersStyle,ds=t.valueText,us=t.valueTextShadow,fs=t.valueDec,ms=t.valueInt,vs=t.valueBox,gs=t.valueBoxStroke,bs=t.valueBoxBorderRadius,ps=t.valueBoxShadow,ws=t.needle,ks=t.needleShadow,ys=t.borderShadowWidth,xs=t.borders,Cs=t.highlights,Ss=t.value,Ts=t.minValue,Ms=t.maxValue,Ps=t.majorTicks,Bs=t.minorTicks,As=t.strokeTicks,Vs=t.animatedValue,Os=t.animateOnInit,Is=t.animation,Es=t.animationDuration,Ls=t.animationRule,Ws=t.animationTarget,Ds=t.useMinPath,Fs=t.title,Ns=t.units,Rs=t.fontTitle,qs=t.fontUnits,js=t.fontValue,zs=t.fontNumbers,Hs=t.fontTitleSize,Gs=t.fontUnitsSize,Us=t.fontValueSize,Ks=t.fontNumbersSize,Ys=t.fontTitleWeight,Xs=t.fontUnitsWeight,Qs=t.fontValueWeight,Js=t.fontNumbersWeight,Zs=t.fontTitleStyle,eh=t.fontUnitsStyle,th=t.fontValueStyle,ih=t.fontNumbersStyle,rh=t.valueText,oh=t.valueTextShadow,nh=t.valueDec,ah=t.valueInt,lh=t.valueBox,sh=t.valueBoxStroke,hh=t.valueBoxBorderRadius,ch=t.valueBoxShadow,dh=t.needle,uh=t.needleShadow,fh=t.borderShadowWidth,mh=t.borders,vh=t.highlights;return e.draw=function(){if(!e.canvas)return e;if(e.canvas.width=e.options.width*e.options.plate.ratio,e.canvas.height=e.options.height*e.options.plate.ratio,e.context=e.canvas.getContext("2d"),!e.context)return e;var t=e.context,i=e.canvas.width,r=e.canvas.height,o=window.devicePixelRatio||1,n=i/o,a=r/o;e.canvas.width=i,e.canvas.height=r,e.canvas.style.width=n+"px",e.canvas.style.height=a+"px",e.context.scale(o,o);var l=e.options;return l.barBeginCircle&&(l.barStrokeWidth=0,l.barLength=100),l.barProgress&&l.barLength>100&&(l.barLength=100),l.value>l.maxValue&&(l.value=l.maxValue),l.value<l.minValue&&(l.value=l.minValue),e.value=l.value,l.animation&&l.animateOnInit&&(e.value=l.minValue),e.drawPlate(),e.drawHighlights(),e.drawMinorTicks(),e.drawMajorTicks(),e.drawNumbers(),e.drawTitle(),e.drawUnits(),l.barProgress?e.drawBar():e.drawNeedle(),e.drawValueBox(),e.update(l),e},e.clear=function(){e.context.clearRect(0,0,e.canvas.width,e.canvas.height)},e.drawPlate=function(){var t=e.context,i=e.options,r=i.width,o=i.height,n=r/2,a=o/2,l=n-i.borderShadowWidth-i.borderOuterWidth,s=a-i.borderShadowWidth-i.borderOuterWidth,h=n-i.borderShadowWidth,c=a-i.borderShadowWidth,d=n-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth,u=a-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth,f=n-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth,m=a-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth;t.save(),i.borders&&(i.borderOuterWidth&&t.beginPath(),t.arc(h,c,l,0,2*Math.PI,!0),t.fillStyle=g(t,i.colorBorderOuter,i.colorBorderOuterEnd,l),t.fill(),i.borderOuterWidth&&t.closePath()),i.borderMiddleWidth&&(t.beginPath(),t.arc(h,c,d,0,2*Math.PI,!0),t.fillStyle=g(t,i.colorBorderMiddle,i.colorBorderMiddleEnd,d),t.fill(),t.closePath()),i.borderInnerWidth&&(t.beginPath(),t.arc(h,c,f,0,2*Math.PI,!0),t.fillStyle=g(t,i.colorBorderInner,i.colorBorderInnerEnd,f),t.fill(),t.closePath()),i.borderShadowWidth&&(t.beginPath(),t.arc(h,c,n,0,2*Math.PI,!0),t.shadowBlur=i.borderShadowWidth,t.shadowColor=i.colorBorderShadow,t.fill(),t.closePath(),t.restore()),t.beginPath(),t.arc(n,a,f,0,2*Math.PI,!0),i.colorPlateEnd?t.fillStyle=g(t,i.colorPlate,i.colorPlateEnd,f):t.fillStyle=i.colorPlate,t.fill(),t.closePath(),t.save()},e.drawHighlights=function(){var t=e.context,i=e.options,r=i.width/2,o=i.height/2,n=r-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth,a=i.highlights;if(a&&a.length){for(var l=0,s=a.length;l<s;l++){var h=a[l];t.beginPath(),t.arc(r,o,n,m(i.startAngle+h.from/i.ticksAngle),m(i.startAngle+h.to/i.ticksAngle),!1),t.strokeStyle=h.color,t.lineWidth=i.highlightsWidth,t.lineCap=i.highlightsLineCap,t.stroke(),t.closePath()}t.save()}},e.drawMinorTicks=function(){var t=e.context,i=e.options,r=i.width/2,o=i.height/2,n=r-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth,a=i.ticksAngle/(i.majorTicks.length-1);if(i.minorTicks){t.lineWidth=i.ticksWidthMinor,t.strokeStyle=i.colorMinorTicks;for(var l=0,s=i.majorTicks.length;l<s;l++)for(var h=0,c=i.minorTicks;h<c;h++){var d=m(i.startAngle+(l+h/c)*a);t.beginPath(),t.moveTo(r+n*Math.sin(d),o-n*Math.cos(d)),t.lineTo(r+(n-i.ticksPadding)*Math.sin(d),o-(n-i.ticksPadding)*Math.cos(d)),t.stroke(),t.closePath()}}},e.drawMajorTicks=function(){var t=e.context,i=e.options,r=i.width/2,o=i.height/2,n=r-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth,a=i.ticksAngle/(i.majorTicks.length-1);if(i.majorTicks.length){t.lineWidth=i.ticksWidth,t.strokeStyle=i.colorMajorTicks;for(var l=0,s=i.majorTicks.length;l<s;l++){var h=m(i.startAngle+l*a);t.beginPath(),t.moveTo(r+n*Math.sin(h),o-n*Math.cos(h)),t.lineTo(r+(n-i.ticksPadding)*Math.sin(h),o-(n-i.ticksPadding)*Math.cos(h)),t.stroke(),t.closePath()}}},e.drawNumbers=function(){var t=e.context,i=e.options,r=i.width/2,o=i.height/2,n=r-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth-i.ticksPadding-5,a=i.ticksAngle/(i.majorTicks.length-1);if(i.majorTicks.length){t.font=i.fontNumbersStyle+" "+i.fontNumbersWeight+" "+i.fontNumbersSize*i.height+"px "+i.fontNumbers,t.fillStyle=i.colorNumbers,t.textAlign="center",t.textBaseline="middle";for(var l=0,s=i.majorTicks.length;l<s;l++){var h=m(i.startAngle+l*a),c=f(i.majorTicks[l],i);t.fillText(c,r+n*Math.sin(h),o-n*Math.cos(h))}}},e.drawTitle=function(){var t=e.context,i=e.options;if(i.title){var r=i.width/2,o=i.height/2;t.font=i.fontTitleStyle+" "+i.fontTitleWeight+" "+i.fontTitleSize*i.height+"px "+i.fontTitle,t.fillStyle=i.colorTitle,t.textAlign="center",t.fillText(i.title,r,o-i.fontTitleSize*i.height/2,r*.8)}},e.drawUnits=function(){var t=e.context,i=e.options;if(i.units){var r=i.width/2,o=i.height/2;t.font=i.fontUnitsStyle+" "+i.fontUnitsWeight+" "+i.fontUnitsSize*i.height+"px "+i.fontUnits,t.fillStyle=i.colorUnits,t.textAlign="center",t.fillText(i.units,r,o+i.fontUnitsSize*i.height/2,r*.8)}},e.drawBar=function(){var t=e.context,i=e.options,r=i.width/2,o=i.height/2,n=r-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth,a=n-i.barStrokeWidth/2,l=a-i.barWidth+i.barStrokeWidth/2,s=m(i.startAngle),h=m(i.startAngle+i.barLength),c=m(i.startAngle+i.barProgress*i.barLength);t.beginPath(),t.lineWidth=i.barWidth,t.strokeStyle=i.colorBar,i.barBeginCircle?t.arc(r,o,l,s-m(i.barBeginCircle/2),h+m(i.barBeginCircle/2),!1):t.arc(r,o,l,s,h,!1),t.stroke(),t.closePath(),i.barStrokeWidth&&(t.beginPath(),t.lineWidth=i.barStrokeWidth,t.strokeStyle=i.colorBarStroke,i.barBeginCircle?t.arc(r,o,a,s-m(i.barBeginCircle/2),h+m(i.barBeginCircle/2),!1):t.arc(r,o,a,s,h,!1),t.stroke(),t.closePath()),i.barProgress&&(t.beginPath(),t.lineWidth=i.barWidth,t.strokeStyle=i.colorBarProgress,i.barBeginCircle?t.arc(r,o,l,s-m(i.barBeginCircle/2),c+m(i.barBeginCircle/2),!1):t.arc(r,o,l,s,c,!1),t.stroke(),t.closePath())},e.drawNeedle=function(){var t=e.context,i=e.options,r=i.width/2,o=i.height/2,n=r-i.borderShadowWidth-i.borderOuterWidth-i.borderMiddleWidth-i.borderInnerWidth,a=i.needleType.toLowerCase(),l=i.ticksAngle,s=i.value,h=i.minValue,c=i.maxValue,d=i.startAngle,u=i.endAngle,f=i.needleStart,v=i.needleEnd,g=i.needleWidth,b=i.needleCircleSize,p=i.needleCircleOuter,w=i.needleCircleInner;s<h&&(s=h),s>c&&(s=c);var k=d+(s-h)*l/(c-h),y=m(k);t.save(),i.needleShadow&&(t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowBlur=10,t.shadowColor=i.colorNeedleShadowDown),t.strokeStyle=g(t,i.colorNeedleStart,i.colorNeedleEnd,v-f,!0,f),t.lineWidth=g,t.lineCap="round",t.beginPath(),"arrow"===a?(t.moveTo(r-Math.sin(y)*(b-2),o+Math.cos(y)*(b-2)),t.lineTo(r-Math.sin(y)*(b+2),o+Math.cos(y)*(b+2)),t.lineTo(r+Math.sin(y)*(n*v),o-Math.cos(y)*(n*v)),t.lineTo(r+Math.sin(y)*(b+2),o-Math.cos(y)*(b+2)),t.lineTo(r-Math.sin(y)*(b-2),o+Math.cos(y)*(b-2))):"line"===a?(t.moveTo(r+Math.sin(y)*(n*f),o-Math.cos(y)*(n*f)),t.lineTo(r+Math.sin(y)*(n*v),o-Math.cos(y)*(n*v))):console.log("Unknown needle type: "+a),t.stroke(),t.closePath(),t.restore(),b&&(t.beginPath(),p&&(t.lineWidth=i.needleCircleWidth,t.strokeStyle=g(t,i.colorNeedleCircleOuter,i.colorNeedleCircleOuterEnd,b),t.arc(r,o,b,0,2*Math.PI,!0),t.stroke(),t.closePath()),w&&(t.beginPath(),t.lineWidth=i.needleCircleWidth,t.strokeStyle=g(t,i.colorNeedleCircleInner,i.colorNeedleCircleInnerEnd,b),t.arc(r,o,b,0,2*Math.PI,!0),t.stroke(),t.closePath()))},e.drawValueBox=function(){var t=e.context,i=e.options;if(i.valueBox){var r=i.width,o=i.height,n=i.valueBoxBorderRadius,a=i.valueBoxWidth,l=i.valueBoxHeight,s=i.valueBoxStroke,h=o/2-l/2,c=r/2-a/2;t.font=i.fontValueStyle+" "+i.fontValueWeight+" "+i.fontValueSize*o+"px "+i.fontValue,t.fillStyle=i.colorValue,t.textAlign="center",t.textBaseline="middle";var d=u(e.value,i);i.valueBoxShadow&&(t.shadowBlur=i.valueBoxShadow,t.shadowColor=i.colorValueBoxShadow),s&&(t.strokeStyle=i.colorValueBoxBorder,t.lineWidth=s,d(t,c,h,a,l,n)),t.fillStyle=i.colorValueBoxBackground,d(t,c,h,a,l,n),t.fill(),t.fillStyle=i.colorValue,t.fillText(d,c+a/2,h+l/2)}},e.update=function(t){return e.options=e.options.constructor.merge(e.options,t),e.canvas.width=e.options.width*e.options.plate.ratio,e.canvas.height=e.options.height*e.options.plate.ratio,e.draw(),e}},e.BaseGauge=function(e){return this.options=e,this.options.width=this.options.width||200,this.options.height=this.options.height||200,this.canvas=this.options.renderTo,this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.context=this.canvas.getContext("2d"),this.draw=function(){var e=this.options;return e.barProgress&&e.barLength>100&&(e.barLength=100),e.value>e.maxValue&&(e.value=e.maxValue),e.value<e.minValue&&(e.value=e.minValue),this.value=e.value,e.animation&&e.animateOnInit&&(this.value=e.minValue),this.drawPlate(),this.drawHighlights(),this.drawMinorTicks(),this.drawMajorTicks(),this.drawNumbers(),this.drawTitle(),this.drawUnits(),e.barProgress?this.drawBar():this.drawNeedle(),this.drawValueBox(),this.update(e),this},this},e.RadialGauge=function(t){var n=this;return r(n,i(n,e.BaseGauge.apply(n,arguments))),n.options=n.options.constructor.merge(e.RadialGauge.Options,t),n.options.ticksAngle=l(n.options.ticksAngle),n.options.startAngle=l(n.options.startAngle),n.options.ticksAngle>360&&(n.options.ticksAngle=360),n.options.ticksAngle<0&&(n.options.ticksAngle=0),n.options.startAngle<0&&(n.options.startAngle=0),n.options.startAngle>360&&(n.options.startAngle=360),n},e.LinearGauge=function(t){var n=this;return r(n,i(n,e.BaseGauge.apply(n,arguments))),n.options=n.options.constructor.merge(e.LinearGauge.Options,t),n},e.rules={linear:function(e,t,i,r){return i*e/r+t},quad:function(e,t,i,r){return i*(e/=r)*e+t},dequad:function(e,t,i,r){return-i*(e/=r)*(e-2)+t},quint:function(e,t,i,r){return i*(e/=r)*e*e*e*e+t},dequint:function(e,t,i,r){return i*((e=e/r-1)*e*e*e*e+1)+t},cycle:function(e,t,i,r){return i*Math.sin(e/r*2*Math.PI)+t},decycle:function(e,t,i,r){return i*(1-Math.sin(e/r*2*Math.PI))+t},bounce:function(e,t,i,r){return(e/=r)<1/2.75?i*7.5625*e*e+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},debounce:function(e,t,i,r){var o=7.5625,n=i-this.bounce(r-e,0,i,r)+t;return n},elastic:function(e,t,i,r){var o=0,n=i;if(0==e)return t;if(1==(e/=r))return t+i;if(o||(o=.3*r),n<Math.abs(i)){n=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/n);return n*Math.pow(2,-10*e)*Math.sin((e*r-a)*2*Math.PI/o)+i+t},delastic:function(e,t,i,r){var o=0,n=i;if(0==e)return t;if(1==(e/=r))return t+i;if(o||(o=.3*r),n<Math.abs(i)){n=i;var a=o/4}else var a=o/(2*Math.PI)*Math.asin(i/n);return i-n*Math.pow(2,-10*e)*Math.sin((e*r-a)*2*Math.PI/o)+t}},e.Animation=function(){var t=this;o(this,e.Animation),this.options={},this.duration=1e3,this.rule="linear",this.fn=e.rules[this.rule],this.listeners=[],this.on=function(e,i){return t.listeners.push({event:e,listener:i}),t},this.off=function(e,i){return t.listeners=t.listeners.filter(function(t){return i?t.event===e&&t.listener!==i:t.event!==e}),t},this.animate=function(i,r){var o=this;i&&(o.options=i),r&&(o.fn=r);var n=new Date,a=setInterval(function(){var i=new Date-n,r=o.options.to-o.options.from;if(i>o.duration)return clearInterval(a),o.listeners.forEach(function(e){"end"===e.event&&e.listener(o.currentValue)}),void(o.currentValue=o.options.to);o.currentValue=o.fn(i,o.options.from,r,o.duration),o.listeners.forEach(function(e){"animate"===e.event&&e.listener(o.currentValue)})},10);return o}},e.DomObserver=function(i,r,n){var a=this;o(this,e.DomObserver),this.observe=function(i,r,o){for(var n=0,l=i.length;n<l;n++){var s=i[n];a.handlers.push({element:s,options:r,handler:o}),a.observer.observe(s,{attributes:!0,childList:!1,characterData:!1})}},this.stopObserve=function(e){a.handlers=a.handlers.filter(function(t){return t.element!==e?t:(a.observer.disconnect(),!1)})},this.isObservable=(e.version=2,e.Collection=function(){var i=this;o(this,e.Collection),this.arr=[],this.push=function(e){return i.arr.push(e),i.arr},this.get=function(e){if("string"==typeof e)for(var t=0,r=i.arr.length;t<r;t++){var o=i.arr[t].options.renderTo.attributes.id.value;if(o===e)return i.arr[t]}return"number"==typeof e?i.arr[e]:null},this.each=function(e){i.arr.forEach(e)},this.invoke=function(e,r){var o=[];return i.arr.forEach(function(i){var n=i[e];"function"==typeof n&&o.push(n.apply(i,t(r)))}),o}},e.Gauge=e.RadialGauge,e.BaseGauge.prototype=new i,r(e.RadialGauge,e.BaseGauge),r(e.LinearGauge,e.BaseGauge),e.BaseGauge.Options={renderTo:null,width:200,height:200,value:0,minValue:0,maxValue:100,title:!1,units:!1,majorTicks:[],minorTicks:10,strokeTicks:!0,animatedValue:!1,animateOnInit:!1,animation:!0,animationDuration:500,animationRule:"linear",animationTarget:"needle",useMinPath:!1,colorPlate:"#fff",colorPlateEnd:!1,colorMajorTicks:"#444",colorMinorTicks:"#666",colorTitle:"#888",colorUnits:"#888",colorNumbers:"#444",colorNeedle:"rgba(240, 128, 128, 1)",colorNeedleEnd:"rgba(255, 160, 122, 1)",colorValueText:"#444",colorValueTextShadow:"rgba(0, 0, 0, 0.3)",colorValueBox:!1,colorValueBoxShadow:"rgba(0, 0, 0, 0.2)",colorValueBoxBackground:"#eee",colorValueBoxBorder:!0,colorNeedleShadowUp:"rgba(2, 2, 2, 0.2)",colorNeedleShadowDown:"rgba(100, 100, 100, 0.2)",colorBorderShadow:"rgba(0, 0, 0, 0.5)",colorBorderOuter:"#ddd",colorBorderOuterEnd:"#aaa",colorBorderMiddle:"#eee",colorBorderMiddleEnd:"#f0f0f0",colorBorderInner:"#fafafa",colorBorderInnerEnd:"#ccc",colorHighlights:"#dff",valueBox:!1,valueBoxStroke:1,valueBoxBorderRadius:2.5,valueBoxWidth:0,valueBoxHeight:0,valueText:"",valueTextShadow:!0,valueInt:3,valueDec:2,majorTicksInt:1,majorTicksDec:0,highlights:[],highlightsWidth:15,highlightsLineCap:"butt",borders:!0,borderShadowWidth:3,borderOuterWidth:10,borderMiddleWidth:10,borderInnerWidth:10,needle:!0,needleShadow:!0,needleType:"arrow",needleStart:0,needleEnd:90,needleWidth:4,needleCircleSize:10,needleCircleOuter:!0,needleCircleInner:!0,needleCircleWidth:2,colorNeedleCircleOuter:"#f0f0f0",colorNeedleCircleOuterEnd:"#ccc",colorNeedleCircleInner:"#e8e8e8",colorNeedleCircleInnerEnd:"#f5f5f5",fontNumbers:"Arial",fontTitle:"Arial",fontUnits:"Arial",fontValue:"Arial",fontNumbersSize:20,fontTitleSize:24,fontUnitsSize:22,fontValueSize:26,fontNumbersStyle:"normal",fontTitleStyle:"normal",fontUnitsStyle:"normal",fontValueStyle:"normal",fontNumbersWeight:"normal",fontTitleWeight:"normal",fontUnitsWeight:"normal",fontValueWeight:"normal",barProgress:!1,barStrokeWidth:0,barBeginCircle:0,barLength:100,barWidth:20,barStroke:"#ccc",barColor:"#f00",colorBar:"#ccc",colorBarProgress:"#888",colorBarStroke:"#222",ticksAngle:270,startAngle:45,ticksWidth:10,ticksWidthMinor:5,ticksPadding:5,plate:{ratio:1,backgroundColor:"#fff",borderWidth:0,borderColor:"#000",shadow:!1,shadowColor:"rgba(0,0,0, .5)",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:5},listeners:{}},e.RadialGauge.Options=e.BaseGauge.Options.constructor.merge(e.BaseGauge.Options,{ticksAngle:270,startAngle:45,colorNeedleCircleOuter:"#f0f0f0",colorNeedleCircleOuterEnd:"#ccc",colorNeedleCircleInner:"#e8e8e8",colorNeedleCircleInnerEnd:"#f5f5f5"}),e.LinearGauge.Options=e.BaseGauge.Options.constructor.merge(e.BaseGauge.Options,{borderRadius:10,barBeginCircle:!1,tickSide:"both",needleSide:"both",numberSide:"both",ticksWidth:10,ticksWidthMinor:5,ticksPadding:5,barLength:85,barWidth:15,barStrokeWidth:2}),"undefined"!=typeof module&&Object.assign(e,module.exports),void 0===e.document&&(e.document=window.document),e.document.gauges=new e.Collection,e.document.addEventListener("DOMContentLoaded",function(){var t=e.document.getElementsByTagName("canvas");e.DomObserver.instance=new e.DomObserver(t,e.Gauge,e.document.gauges)})}(this.window||{});
